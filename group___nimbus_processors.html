<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nimbus: Nimbus Processors</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24278774-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body>
<div id="page">
<div style="position:relative">
<div id="top"><!-- do not remove this div! -->

<div id="titlearea">
<a style="float: right;margin-right:20px;margin-top:20px" href='http://www.pledgie.com/campaigns/15519'><img alt='Click here to support Nimbus development and make a donation at www.pledgie.com !' src='http://www.pledgie.com/campaigns/15519.png?skin_name=chrome' border='0' /></a>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nimbus
   &#160;<span id="projectnumber">0.6.1 - <a href="http://github.com/jverkoey/nimbus">Nimbus is proudly hosted on Github</a></span>
   </div>
   <div id="projectbrief">An iOS framework whose growth is bounded by O(documentation).</div>
  </td>
  
  
  
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.4-20110629 -->
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group___nimbus_processors.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#groups">Modules</a>  </div>
  <div class="headertitle">
<div class="title">Nimbus Processors</div>  </div>
</div>
<div class="contents">
<hr/><a name="details" id="details"></a><h2>Overview</h2>
<p>Processors are for performing complex data manipulation on separate threads. </p>
<p>Processing data is a potential bottleneck for any application that manipulates data. Older iPhone and iPod touch models get the worst of this with their slower processors and smaller amounts of ram. As such, it's very important to attempt to push off any data processing from the main UI thread. <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> processors provide a consistent means of processing data in a defered way using NSOperations.</p>
<h2>Processor Chain of Operations</h2>
<p>Processors process their data in the following order, with the result and any errors from each step being fed to the next one.</p>
<ol type="1">
<li><b>[subclass]</b> <em>objectFromResponseData:error:</em></li>
<li><b> [block]</b> <em>processDataBlock(object, error)</em></li>
<li><b>[delegate]</b> <em>processor:processObject:error:</em></li>
</ol>
<h2>Suggestions for Picking a Processing Method</h2>
<h3>Use Blocks and <a class="el" href="protocol_n_i_processor_delegate-p.html" title="Defines the basic protocol for processing data.">NIProcessorDelegate</a> for One-Off Implementations</h3>
<p>Blocks can be particularly handy for writing inline code quickly, but after a certain point of complexity it may be cleaner to use the processorDelegate. If your block is spans more than 10 lines of code or so, it might be worth considering moving the logic into the delegate method.</p>
<h3>Subclass Common Functionality</h3>
<p>If you find yourself repeating the same functionality across a variety of controllers you should consider building a subclass. A good example is the <a class="el" href="interface_n_i_j_s_o_n_kit_processor_h_t_t_p_request.html" title="A processor that uses JSONKit to turn the JSON response into objects.">NIJSONKitProcessorHTTPRequest</a>, which subclasses <a class="el" href="interface_n_i_processor_h_t_t_p_request.html" title="An HTTP request that processes the returned data on a separate thread.">NIProcessorHTTPRequest</a> and turns the response data into Objective-C objects. This class can now be reused throughout an application.</p>
<h2>Examples</h2>
<h3>Fetching the Name of a Node in the Facebook Graph</h3>
<div class="fragment"><pre class="fragment">  <span class="comment">// The graph API path for the Nimbus Facebook group.</span>
  <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* urlPath = <span class="stringliteral">@&quot;https://graph.facebook.com/186162441444201&quot;</span>;

  <span class="comment">// Create a JSONKit processor that will turn the response data into Objective-C objects.</span>
  <a class="code" href="interface_n_i_processor_h_t_t_p_request.html" title="An HTTP request that processes the returned data on a separate thread.">NIProcessorHTTPRequest</a>* request = [[[<a class="code" href="interface_n_i_j_s_o_n_kit_processor_h_t_t_p_request.html" title="A processor that uses JSONKit to turn the JSON response into objects.">NIJSONKitProcessorHTTPRequest</a> alloc] initWithURL:
                                      [NSURL URLWithString:urlPath]] autorelease];

  <span class="comment">// The following block will be processed on the processor request&#39;s thread and is</span>
  <span class="comment">// step 2 in the chain of operations outlined above.</span>
  <span class="comment">// We can do computationally expensive operations here without blocking the UI in any way.</span>
  <span class="comment">// Note: You must be careful not to access any non-thread-safe objects from within this block.</span>
  request.<a class="code" href="interface_n_i_processor_h_t_t_p_request.html#ae7c2909f0df1cd0ff2530b74fa458a3f" title="The second step in the processing order for the data.">processDataBlock</a> = ^(<span class="keywordtype">id</span> object, NSError** error) {

    <span class="comment">// By this point step 1 of the chain of operations will have been performed and</span>
    <span class="comment">// JSONKit will have turned the JSON response data into an object, assuming it didn&#39;t fail.</span>
    <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* graphName = nil;

    <span class="comment">// If JSONKit failed to parse the object then there&#39;s nothing we can do here.</span>
    <span class="keywordflow">if</span> (nil != *error) {
      graphName = [<span class="keywordtype">object</span> objectForKey:<span class="stringliteral">@&quot;name&quot;</span>];
    }

    <span class="comment">// The block expects us to return an id type.</span>
    <span class="keywordflow">return</span> (<span class="keywordtype">id</span>)graphName;
  };

  <span class="comment">// This allows us to receive notification of completion for this request.</span>
  request.delegate = <span class="keyword">self</span>;

  [operationQueue addOperation:request];


  <span class="comment">// Called on the main thread.</span>
  - (void)requestFinished:(<a class="code" href="interface_n_i_processor_h_t_t_p_request.html" title="An HTTP request that processes the returned data on a separate thread.">NIProcessorHTTPRequest</a> *)request {
    <a class="code" href="class_n_s_string.html" title="For manipulating NSStrings.">NSString</a>* graphName = [request.<a class="code" href="interface_n_i_processor_h_t_t_p_request.html#a079aadcb5f4ea692ad4f89f71a41f82d" title="The resulting root object after the request has completed and the data has been processed.">processedObject</a> retain];
    <span class="comment">// Do what we will with the graph name now.</span>
    <span class="keyword">self</span>.title = graphName;
  }
</pre></div> <table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">protocol &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="protocol_n_i_processor_delegate-p.html">&lt;NIProcessorDelegate&gt;</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines the basic protocol for processing data.  <a href="protocol_n_i_processor_delegate-p.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="groups"></a>
Modules</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___network-_processors.html">Network Processors</a></td></tr>
</table>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
</div><!-- .fixedwidth -->


    <span class="footer">Generated for Nimbus by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4-20110629 </span>
   </ul>
 </div>


</div> <!-- page -->
</body>
</html>
