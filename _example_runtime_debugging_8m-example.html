<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nimbus: ExampleRuntimeDebugging.m</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="page">
<div class="fixedwidth">
<div id="top"><!-- do not remove this div! -->

<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nimbus
   &#160;<span id="projectnumber">0.2.1</span>
   </div>
   <div id="projectbrief">An iOS framework whose growth is bounded by O(documentation).</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">ExampleRuntimeDebugging.m</div>  </div>
</div>
<div class="contents">
<p>Runtime Debugging with Method Swizzling</p>
<p>Modifying class methods at runtime can be a very powerful debugging tool. Consider the following example:</p>
<p>You are finding that you have a memory leak with one of your view controllers, but you're not sure where the extra retain is being made. If you swap the retain implementation on UIViewController with your own method then you can set a breakpoint in the method and look at the stack each time retain is called. This method is similar to setting a breakpoint in GDB on the UIViewController's retain method but allows programmatic control over when you want to hit the breakpoint.</p>
<p>This example is part of <a class="el" href="group___runtime-_class-_modifications.html">Runtime Class Modifications</a>.</p>
<div class="fragment"><pre class="fragment"><span class="comment">//</span>
<span class="comment">// Copyright 2011 Jeff Verkoeyen</span>
<span class="comment">//</span>
<span class="comment">// Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="comment">// you may not use this file except in compliance with the License.</span>
<span class="comment">// You may obtain a copy of the License at</span>
<span class="comment">//</span>
<span class="comment">//    http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="comment">//</span>
<span class="comment">// Unless required by applicable law or agreed to in writing, software</span>
<span class="comment">// distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="comment">// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="comment">// See the License for the specific language governing permissions and</span>
<span class="comment">// limitations under the License.</span>
<span class="comment">//</span>

<span class="keyword">@interface </span>UIViewController()

- (id)_retain;

<span class="keyword">@end</span>


<span class="keyword">@implementation </span>UIViewController()

- (id)_retain {
  <span class="comment">// _retain has been swizzled so calling _retain here will actually call retain.</span>
  [<span class="keyword">self</span> _retain]; <span class="comment">// Set a breakpoint here.</span>
}

<span class="keyword">@end</span>

- (BOOL)              application: (UIApplication *)application
    didFinishLaunchingWithOptions: (NSDictionary *)options {

  <span class="comment">// Swap the default retain implementation with our custom implementation with which we can</span>
  <span class="comment">// visually set a breakpoint.</span>
  <a name="a0"></a><a class="code" href="group___runtime-_class-_modifications.html#gafa9da20fcf364cf90b11cc5e317a07e7" title="Swap two method implementations for the given class.">NISwapMethods</a>([UIViewController <span class="keyword">class</span>], <span class="keyword">@selector</span>(retain), <span class="keyword">@selector</span>(_retain));

}
</pre></div> </div>
</div>
</div><!-- .fixedwidth -->



<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 14 2011 22:21:17 for Nimbus by&#160;<a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4</small></address>

</div> <!-- page -->
</body>
</html>
