<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Nimbus: Three20 Migration Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="stylesheet.css" rel="stylesheet" type="text/css" />


<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-24278774-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
<body>
<div id="page">
<div style="position:relative">
<div id="top"><!-- do not remove this div! -->

<div id="titlearea">
<a style="float: right;margin-right:20px;margin-top:20px" href='http://www.pledgie.com/campaigns/15519'><img alt='Click here to support Nimbus development and make a donation at www.pledgie.com !' src='http://www.pledgie.com/campaigns/15519.png?skin_name=chrome' border='0' /></a>
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Nimbus
   &#160;<span id="projectnumber">0.7.0 - <a href="http://github.com/jverkoey/nimbus">Nimbus is proudly hosted on Github</a></span>
   </div>
   <div id="projectbrief">An iOS framework whose growth is bounded by O(documentation).</div>
  </td>
  
  
  
   
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.4-20110629 -->
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('group___three20-_migration-_guide.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Three20 Migration Guide</div>  </div>
</div>
<div class="contents">
<h2>Getting Started</h2>
<p>If you've added Three20 to one of your projects then you're undoubtedly familiar with the incredible overhead of the framework's size and work involved in tweaking project settings. While the concept of shared static libraries has its benefits, the reality is that most applications are standalone entities and it is rare that you would be switching between applications rapidly enough to justify the shared build times.</p>
<p><a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> reduces build times by throwing this model out the window altogether and being truly modular. When you add <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> to your project, you only add the code for the features you <em>want</em> to use, and you add this code directly to your project. With <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a>, you only need to manage one project's settings, one target for your application, and zero dependent static libraries (unless you're using a non-Nimbus library of course). This also means that if there is a feature within <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> that you've already built or included in your app (ASIHTTPRequest), for example, then you can simply use that code and modify it as you wish.</p>
<h3>The <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> Namespace</h3>
<p>The <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> namespace is an <code>NI</code> prefix to all types and functions. Three20's is <code>TT</code>. Quite often Three20 features will exist in <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> as well. When this is the case, you simply have to replace the <code>TT</code> prefix with <code>NI</code>.</p>
<h3>Using <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> Alongside Three20</h3>
<p>It is possible for both frameworks to exist in one application because the two frameworks use different prefices. This has the obvious downside of only increasing the size of your application, but as <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> develops the benefit of replacing certain features with <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> equivalents may prove worth the cost. In the future it is hoped that <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> will reach feature parity with Three20, at which point you would be able to remove Three20 from your project altogether.</p>
<h2>Features That Map One-to-One</h2>
<p>Certain features map from Three20 to <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> directly. You can begin using these features by doing a global find and replace in your application's code.</p>
<h3>Debugging Tools</h3>
<pre>
  Three20                         <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a>
  -----------------------------   --------------------------------------
  TTDASSERT()                     <a class="el" href="group___debugging-_tools.html#ga13cc3ae82820ea8141bc319bcb76ab7f" title="Assertions that only fire when DEBUG is defined.">NIDASSERT()</a>
  TTDCONDITIONLOG()               <a class="el" href="group___debugging-_tools.html#ga2d769dcaac3915eea5b9860a40bd179a" title="Only writes to the log if condition is satisified.">NIDCONDITIONLOG()</a>
  TTDPRINT()                      <a class="el" href="group___debugging-_tools.html#ga74e1fbd5193e3020f3abf072dcd59f26" title="Only writes to the log when DEBUG is defined.">NIDPRINT()</a>
  TTDPRINTMETHODNAME()            <a class="el" href="group___debugging-_tools.html#gaa606f4ba1dd48de5e2fd679b7d8b22d8" title="Write the containing method&#39;s name to the log using NIDPRINT.">NIDPRINTMETHODNAME()</a>
  TTDINFO()                       <a class="el" href="group___debugging-_tools.html#gaf0d5ca9cb5bd5c57cfaee0b9a565bb84" title="Only writes to the log if NIMaxLogLevel &gt;= NILOGLEVEL_INFO.">NIDINFO()</a>
  TTDERROR()                      <a class="el" href="group___debugging-_tools.html#gab5d8a773517976d97335706474ae1317" title="Only writes to the log if NIMaxLogLevel &gt;= NILOGLEVEL_ERROR.">NIDERROR()</a>
  TTDWARNING()                    <a class="el" href="group___debugging-_tools.html#gacc8f90bb05765e613bb0dbb16d372dfc" title="Only writes to the log if NIMaxLogLevel &gt;= NILOGLEVEL_WARNING.">NIDWARNING()</a>
 </pre><h3>Device Orientation</h3>
<pre>
  Three20                         <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a>
  -----------------------------   --------------------------------------
  TTIsSupportedOrientation()      <a class="el" href="group___device-_orientation.html#gad11b7958206db7c5d5a85d78f6d5ce4b" title="For use in shouldAutorotateToInterfaceOrientation:">NIIsSupportedOrientation()</a>
 </pre><h3>Network Activity</h3>
<pre>
  Three20                         <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a>
  -----------------------------   --------------------------------------
  TTNetworkRequestStarted()       <a class="el" href="group___network-_activity.html#ga3e923f142d5a8fc6fab084c6ab215750" title="Increment the number of active network tasks.">NINetworkActivityTaskDidStart()</a>
  TTNetworkRequestStopped()       <a class="el" href="group___network-_activity.html#ga2c80c44ffd1d89dfffa834864d7f64c1" title="Decrement the number of active network tasks.">NINetworkActivityTaskDidFinish()</a>
 </pre><h3>Preprocessor Macros</h3>
<pre>
  Three20                         <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a>
  -----------------------------   --------------------------------------
  __TT_DEPRECATED_METHOD          __NI_DEPRECATED_METHOD
  TT_FIX_CATEGORY_BUG()           <a class="el" href="group___preprocessor-_macros.html#ga55ff03b06ecaecaf3c88463ebd81b9a6" title="Force a category to be loaded when an app starts up.">NI_FIX_CATEGORY_BUG()</a>
  TT_RELEASE_SAFELY()             <a class="el" href="group___preprocessor-_macros.html#ga5d2e99251aeb3ddb687e27f72336e5db" title="Release and assign nil to an object.">NI_RELEASE_SAFELY()</a>
 </pre><h2>Three20 Features Deprecated by <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> Features</h2>
<p>Some features built for <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> completely deprecate closely related Three20 features. To switch from using the Three20 feature to the <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> equivalent may require some extra work beyond a simply find-and-replace. Where possible the architectural differences are noted below to aid in the transition process.</p>
<h3>In-Memory Caching With TTURLCache</h3>
<p><a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> provides <a class="el" href="interface_n_i_memory_cache.html" title="An in-memory cache for storing objects with expiration support.">NIMemoryCache</a> for caching objects in memory. It is designed only for storing objects in memory and does not provide disk caching. This is by design: touching the disk should be an explicit activity so that the performance implications are obvious. TTURLCache was not clear on how it accessed the disk cache.</p>
<p>Due to this design choice, one of the primary differences between <a class="el" href="interface_n_i_memory_cache.html" title="An in-memory cache for storing objects with expiration support.">NIMemoryCache</a> and TTURLCache is the fact that <a class="el" href="interface_n_i_memory_cache.html" title="An in-memory cache for storing objects with expiration support.">NIMemoryCache</a> does not provide a disk cache. You can't use an <a class="el" href="interface_n_i_memory_cache.html" title="An in-memory cache for storing objects with expiration support.">NIMemoryCache</a> to store or load images from disk.</p>
<p>TTURLCache is primarily used for caching images. It uses a fake, least-recently-used cache removal algorithm where images are removed in the same order that they were added to the cache. This can lead to unexpected cache misses when the cache is used heavily and images start being removed even though they were recently used.</p>
<p><a class="el" href="interface_n_i_image_memory_cache.html" title="An in-memory cache for storing images with caps on the total number of pixels.">NIImageMemoryCache</a> solves this problem by taking advantage of the true least-recently-used cache removal algorithm built into <a class="el" href="interface_n_i_memory_cache.html" title="An in-memory cache for storing objects with expiration support.">NIMemoryCache</a>. Whenever an image is accessed it moves to the end of a linked list. When the cache limit is reached or a memory warning is received, images are removed from the front of the linked list until the memory constraints are satisfied.</p>
<h3>Global Singletons</h3>
<p>Three20 implements singletons directly in the class that provides the singleton implementation. This places too much emphasis on the fact that the object is meant to be used as a singleton, so <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> avoids this practice.</p>
<p>Instead, <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> provides access to singletons via the global <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> state object. You'll notice that <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> is highlighted as a link throughout the documentation, this is because <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> is a class within the <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> framework. To access singletons, you call class methods on <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a>.</p>
<p>For example, to access Nimbus' equivalent to TTURLCache, you use <code>[<a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> imageMemoryCache]</code>.</p>
<h3>Network Images with TTImageView</h3>
<p>Three20's network image view is completely deprecated by Nimbus' <a class="el" href="interface_n_i_network_image_view.html" title="A network-enabled image view that consumes minimal amounts of memory.">NINetworkImageView</a>. Three20's network image view is an overly complicated TTView object with too many non-critical features built in. <a class="el" href="interface_n_i_network_image_view.html" title="A network-enabled image view that consumes minimal amounts of memory.">NINetworkImageView</a>, on the other hand, is a simple UIImageView view.</p>
<p><a class="el" href="interface_n_i_network_image_view.html" title="A network-enabled image view that consumes minimal amounts of memory.">NINetworkImageView</a> is incredibly efficient when it comes to using memory. Where TTImageView would download an image and them simply crop and resize the image whenever the view was drawn, <a class="el" href="interface_n_i_network_image_view.html" title="A network-enabled image view that consumes minimal amounts of memory.">NINetworkImageView</a> crops and resizes the image on a separate thread and then draws the image without any scaling required. The image stored in the memory cache is also much smaller as result. Performance is noticeably improved when many image views are on the screen at once. A good example would be flipping through a friend list on the iPad with large, high-resolution images laid out in a grid.</p>
<p><a class="el" href="interface_n_i_network_image_view.html" title="A network-enabled image view that consumes minimal amounts of memory.">NINetworkImageView</a> also handles retina displays more intelligently than TTImageView by creating scaled UIImages.</p>
<h3>Photo Albums with TTPhotoViewController</h3>
<p>Three20's photo album viewer was built around the time iOS 3.0 was first coming out. Take a second to let that sink in, because that was a hell of a long time ago by the iOS SDK's standards.</p>
<p>Around that time the scroll view implementations were certainly lacking some of the nice features required by a photo viewer. As a result, Three20 included a from-the-ground-up implementation of TTScrollView. This is no longer necessary and the new <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> photo viewer rejoices in the use of native UIScrollViews.</p>
<p>Three20's photo viewer was also incredibly entrenched in the Three20 network model battleground with no hope of salvation. Nimbus' photo viewer is built using a light-weight, completely independent data source/delegate design that is similar in principle to UITableView.</p>
<p>Instead of using a TTPhotoViewController, you can now use an <a class="el" href="interface_n_i_toolbar_photo_view_controller.html" title="A simple photo album view controller implementation with a toolbar.">NIToolbarPhotoViewController</a>. All you are required to do is implement the data source methods. Examples of such implementations can be found in the network photo album sample app.</p>
<p><a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> photo viewer is faster, performs better under low-memory conditions, uses native scroll views and has an overall lower memory footprint. It also encourages processing data on separate threads instead of in the main UI thread like Three20's network stack does.</p>
<h3>Web Views with TTWebController</h3>
<p>Three20's web controller is one of the most popular controllers used in the Three20 framework. It is tied to the UI, UINavigator, UICommon, Style, Network and Core libraries though which meant that you had to pull in the entire Three20 framework just to use the web controller.</p>
<p>NIWebController's only dependency is the <a class="el" href="interface_nimbus.html" title="The Nimbus state interface.">Nimbus</a> Core and it a direct subclass of UIViewController. This makes it is remarkably easy to add the web controller to any project with minimal overhead. </p>
<table class="memberdecls">
</table>
<div id="disqus_thread"></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
</div><!-- .fixedwidth -->

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'nimbusdocumentation'; // required: replace example with your forum shortname

    // The following are highly recommended additional parameters. Remove the slashes in front to use.
    // var disqus_identifier = 'unique_dynamic_id_1234';
    // var disqus_url = 'http://example.com/permalink-to-page.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>


    <span class="footer">Generated for Nimbus by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4-20110629 </span>
   </ul>
 </div>


</div> <!-- page -->
</body>
</html>
